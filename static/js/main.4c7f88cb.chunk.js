(this.webpackJsonpcivilization=this.webpackJsonpcivilization||[]).push([[0],{1333:function(e,t,n){},1339:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(35),c=n.n(i),o=n(2),l=n(105),u=n(15),s=n(92),d=n(146),f=n.n(d),m=n(147),b=n.n(m),p=n(107),y=n(93),O=n(19),j=n(21),h=n(20),E=n(82),I=n(89),v=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){return Object(O.a)(this,n),t.apply(this,arguments)}return n}(E.a);v.modelName="City",v.fields={id:Object(I.a)(),housing:Object(I.a)()};var g=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){return Object(O.a)(this,n),t.apply(this,arguments)}return n}(E.a);g.modelName="DistrictType",g.fields={id:Object(I.a)(),label:Object(I.a)(),tasks:Object(I.a)()};var x=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){return Object(O.a)(this,n),t.apply(this,arguments)}return n}(E.a);x.modelName="District",x.fields={id:Object(I.a)(),districtTypeId:Object(I.b)({to:"DistrictType",as:"districtType",relatedName:"districts"}),cityId:Object(I.b)({to:"City",as:"city",relatedName:"districts"})};var C=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){return Object(O.a)(this,n),t.apply(this,arguments)}return n}(E.a);C.modelName="Person",C.fields={id:Object(I.a)(),cityId:Object(I.b)({to:"City",as:"city",relatedName:"people"})};var k=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){return Object(O.a)(this,n),t.apply(this,arguments)}return n}(E.a);k.modelName="ResourceStockpile",k.fields={resourceId:Object(I.b)({to:"Resource",as:"resource",relatedName:"stockpiles"}),cityId:Object(I.b)({to:"City",as:"city",relatedName:"stockpiles"}),id:Object(I.a)(),amount:Object(I.a)(),limit:Object(I.a)()};var T=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){return Object(O.a)(this,n),t.apply(this,arguments)}return n}(E.a);T.modelName="Seat",T.fields={districtId:Object(I.b)({to:"District",as:"district",relatedName:"seats"}),taskId:Object(I.b)({to:"Task",as:"task",relatedName:"seats"}),personId:Object(I.c)({to:"Person",as:"person",relatedName:"seat"})};var S=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){return Object(O.a)(this,n),t.apply(this,arguments)}return n}(E.a);S.modelName="Task",S.fields={id:Object(I.a)(),duration:Object(I.a)(),effects:Object(I.a)()};var w=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){return Object(O.a)(this,n),t.apply(this,arguments)}return n}(E.a);w.modelName="Continent",w.fields={id:Object(I.a)(),explored:Object(I.a)(),biomes:Object(I.a)(),planetId:Object(I.b)({to:"Planet",as:"planet",relatedName:"continents"})};var P=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){return Object(O.a)(this,n),t.apply(this,arguments)}return n}(E.a);P.modelName="Plot",P.fields={id:Object(I.a)(),cityId:Object(I.c)({to:"City",as:"city",relatedName:"plot"}),continentId:Object(I.b)({to:"Continent",as:"continent",relatedName:"plots"})};var A=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){return Object(O.a)(this,n),t.apply(this,arguments)}return n}(E.a);A.modelName="Buyable",A.fields={id:Object(I.a)(),label:Object(I.a)(),cost:Object(I.a)()};var R=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){return Object(O.a)(this,n),t.apply(this,arguments)}return n}(E.a);R.modelName="Unlock",R.fields={id:Object(I.a)()};var D=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){return Object(O.a)(this,n),t.apply(this,arguments)}return n}(E.a);D.modelName="Resource",D.fields={id:Object(I.a)()};var N=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){return Object(O.a)(this,n),t.apply(this,arguments)}return n}(E.a);N.modelName="Planet",N.fields={id:Object(I.a)(),type:Object(I.a)(),systemId:Object(I.b)({to:"System",as:"system",relatedName:"planets"})};var M=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){return Object(O.a)(this,n),t.apply(this,arguments)}return n}(E.a);M.modelName="System",M.fields={id:Object(I.a)(),explored:Object(I.a)()};var _=new y.a({stateSelector:function(e){return e.root}});_.register(S,x,D,C,N,M,R,P,T,g,k,v,A,w);var L=_,B=n(23),G=n(48),U=n(9),H=n(28),V=n(152),z=n.n(V),W=n(44),X=n.n(W),K=["Kilgate","Dustfair","Deadbreak","Greenscar","Silkbreak","Cragborough","Greenfrost","Snowhelm","Midacre","Fearvalley","Shadekeep","Steamvein","Tradespell","Westshell","Northreach","Fairrun","Oakenshire","Windhall","Redfrost","Glimmerborn","Redwick","Quicktown","Stormgulf","Deepgarde","Craghall","Lakeharbor","Bonehaven","Greenhand","Newshear","Puremere","Cloudwell","Oceanmoor","Rosehand","Boulderward","Sleettide","Bleakpost","Limehallow","Whalehall","Roguehelm","Knightcoast","Smoothcoast","Ebonwell","Basinfall","Winterview","Cursetide","Ravenborough","Boulderwind","Steelvale","Beachbury","Springfront"],F=[{id:"center",label:"City Center",tasks:[{id:"scavenge"}]},{id:"barracks",label:"Encampment",tasks:[{id:"hunt"}]},{id:"industry",label:"Industrial Zone",tasks:[{id:"mine"},{id:"chop"}]},{id:"church",label:"Holy Site",tasks:[{id:"pray"}]},{id:"campus",label:"Campus",tasks:[{id:"study"}]},{id:"market",label:"Commercial Hub",tasks:[{id:"trade"}]},{id:"theatre",label:"Theatre Square",tasks:[{id:"perform"}]}],Y=[{id:"scavenge",duration:1,effects:[{id:"food",value:[1,4]},{id:"wood",value:[0,0,0,.1,.2]}]},{id:"chop",biome:["forest"],duration:1,effects:[{id:"wood",value:1}]},{id:"farm",biome:["plain"],duration:1,effects:[{id:"food",value:10}]},{id:"mine",biome:["mountain"],duration:1,effects:[{id:"stone",value:1}]},{id:"pray",duration:1,effects:[{id:"faith",value:1}]},{id:"hunt",duration:1,effects:[{id:"fur",value:1}]},{id:"trade",duration:1,effects:[{id:"gold",value:1}]},{id:"perform",duration:1,effects:[{id:"culture",value:1}]},{id:"study",duration:1,effects:[{id:"science",value:1}]},1],q=[3,3],J=[2,5],Z=[2,4],Q=[2,6],$=function(e,t){var n=e.all().toRefArray().map((function(e){return e.label}));return X()(t.filter((function(e){return!n.includes(e)})))},ee=[{id:"food",limit:500,color:"#f95757"},{id:"wood",limit:100,color:"#905100"},{id:"fur",limit:100,color:"#d0865b"},{id:"stone",limit:100,color:"#8a8a8a"},{id:"faith",limit:100,color:"#9093ff"},{id:"gold",limit:100,color:"#f1ba1a"},{id:"science",limit:100,color:"#090eb5"},{id:"culture",limit:100,color:"#ab16c5"},{id:"growth",limit:100,color:"#000000"}],te=[{id:"buySeat",label:"+ seat",cost:{wood:10}},{id:"createDistrict",label:"+ district",cost:{wood:50}},{id:"buyCity",label:"+ city",cost:{wood:100}},{id:"exploreContinent",label:"explore",cost:{wood:1e3}},{id:"settleContinent",label:"settle continent",cost:{wood:500}},{id:"explorePlanet",label:"explore ocean",cost:{wood:1e4}},{id:"settlePlanet",label:"settle planet",cost:{wood:5e3}},{id:"exploreSystem",label:"explore stars",cost:{wood:1e5}},{id:"settleSystem",label:"settle system",cost:{wood:5e4}},{id:"exploreGalaxy",label:"explore systems",cost:{wood:1e6}}],ne=["food","wood","fur","stone","faith","gold","science","culture","center","scavenge","barracks","hunt","industry","mine","chop","church","pray","campus","study","market","trade","theatre","perform","galaxy","system","planet","continent"],ae=Object(H.a)("CREATE_CITY"),re=function(e,t){var n=t.plotId,a=t.label,r=void 0===a?$(e.City,K):a,i=t.people,c=void 0===i?[{}]:i,o=e.Plot.withId(n),l=e.Resource.all().toModelArray(),u=e.City.create({label:r,housing:5,continentId:o.continent.id,planetId:o.continent.planet.id,systemId:o.continent.planet.system.id}).ref.id;return l.forEach((function(t){var n=t.id,a=e.Resource.withId(n),r=a?a.ref.amount:0,i=500*(a?a.ref.limit:100);e.ResourceStockpile.create({resourceId:n,amount:r,limit:i,cityId:u})})),c.forEach((function(t){return ue(e,{cityId:u,person:t})})),ce(e,{cityId:u,districtTypeId:"center"}),o.update({explored:!0,cityId:u}),o.continent.update({explored:!0}),o.continent.planet.update({explored:!0}),o.continent.planet.system.update({explored:!0}),e.state},ie=Object(H.a)("CREATE_BUILDING"),ce=function(e,t){var n=t.cityId,a=t.districtTypeId,r=t.seatCount,i=Object(B.a)(t,["cityId","districtTypeId","seatCount"]),c=e.District.create(Object(U.a)({districtTypeId:a,cityId:n},i));return e.DistrictType.all().toModelArray().find((function(e){return e.id===a})).tasks.forEach((function(t){for(var n=r||1;n-- >0;)le(e,{districtId:c.id,taskId:t.id})})),e.state},oe=Object(H.a)("CREATE_SEAT"),le=function(e,t){var n=t.districtId,a=t.taskId;return e.Seat.create({progress:0,taskId:a,districtId:n}),e.state},ue=(Object(H.a)("CREATE_PERSON"),function(e,t){var n=t.cityId,a=t.person;return e.Person.create(Object(U.a)(Object(U.a)({label:z.a.name.firstName()},a),{},{cityId:n})),e.state}),se=Object(H.a)("DRAG");var de=n(45),fe=n.n(de),me=n(153),be=n.n(me),pe=n(46),ye=n.n(pe),Oe=["Ihaes","Clopath","Prafica","Eadari","Aecoya","Auhela","Heuvruprix","Yamiuyith","Vraeholall","Wekraitruin","Shulela","Awin","Utun","Iuslos","Vleorath","Miogaes","Iyuagea","Aibutend","Jiodrefias","Breidimune","Fohira","Drafos","Owios","Euyune","Aebran","Ogoa","Cuslaizor","Sledaudon","Iakeheron","Tiukunoth","Ulul","Olix","Vlizos","Drowrand","Eikrin","Eucrora","Sleiqiseth","Klaepimuin","Yaibrohall","Griufowos","Hotox","Amela","Egela","Traphith","Eubres","Heacax","Eohipor","Qaeshufix","Iazulela","Aewimix"],je=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.planetId,a=t.label,r=void 0===a?$(e.Continent,Oe):a,i=Object(B.a)(t,["planetId","label"]),c=e.Planet.withId(n),o=e.Continent.create(Object(U.a)(Object(U.a)({},i),{},{explored:!1,biomes:c.type.biomes,label:r,planetId:n}));return ye()(fe.a.apply(void 0,Object(G.a)(Q)),(function(){return he(e,{continentId:o.id})})),e.state},he=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.continentId,a=Object(B.a)(t,["continentId"]),r=e.Continent.withId(n);return e.Plot.create(Object(U.a)(Object(U.a)({},a),{},{biome:X()(r.biomes),continentId:n})),e.state},Ee=["Uphavis","Togrinus","Canzarvis","Xanvara","Suicury","Zopra","Cheutov","Vuyonus","Tryria BL","Moth I2W","Tachaistea","Rigrithea","Delmeshan","Chidrilia","Thahiri","Soturn","Llutetune","Mupeyama","Gillon P8E8","Phurn 8U7","Thibbunus","Tolnoavis","Modillon","Yallagua","Xiastea","Xounia","Nozacarro","Phusiyama","Dapus 6552","Llov 0310","Onnelea","Komaerus","Monnore","Thunkyke","Luamia","Keistea","Gapenides","Trodenus","Gyria 84WZ","Gnone 21SV","Runzoaclite","Bestritania","Ollilles","Yobomia","Vatune","Duistea","Drosenus","Grooruta","Chypso 75","Lion 6S1Z"],Ie=[{id:"earthlike",biomes:["forest","mountain","tundra","plain"]}],ve=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.systemId,a=Object(B.a)(t,["systemId"]),r=e.Planet.create(Object(U.a)(Object(U.a)({},a),{},{type:X()(Ie),label:$(e.Planet,Ee),systemId:n}));return ye()(fe.a.apply(void 0,Object(G.a)(Z)),(function(){return je(e,{planetId:r.ref.id})})),e.state},ge=["Andromeda","Antlia","Apus","Aquarius","Aquila","Ara","Aries","Auriga","Bootes","Caelum","Camelopardalis","Cancer","Canes Venatici","Canis Major","Canis Minor","Capricornus","Carina","Cassiopeia","Centaurus","Cepheus","Cetus","Chamaeleon","Circinus","Columba","Coma Berenices","Corona Australis","Corona Borealis","Corvus","Crater","Crux","Cygnus","Delphinus","Dorado","Draco","Equuleus","Eridanus","Fornax","Gemini","Grus","Hercules","Horologium","Hydra","Hydrus","Indus","Lacerta","Leo","Leo Minor","Lepus","Libra","Lupus","Lynx","Lyra","Mensa","Microscopium","Monoceros","Musca","Norma","Octans","Ophiuchus","Orion","Pavo","Pegasus","Perseus","Phoenix","Pictor","Pisces","Piscis Austrinus","Puppis","Pyxis","Reticulum","Sagitta","Sagittarius","Scorpius","Sculptor","Scutum","Serpens","Sextans","Taurus","Telescopium","Triangulum","Triangulum Australe","Tucana","Ursa Major","Ursa Minor","Vela","Virgo","Volans","Vulpecula"],xe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.System.create(Object(U.a)(Object(U.a)({},t),{},{explored:!1,label:$(e.System,ge)}));return ye()(fe.a.apply(void 0,Object(G.a)(J)),(function(){return ve(e,{systemId:n.ref.id})})),e.state},Ce=n(154),ke=n.n(Ce),Te=Object(H.a)("INIT"),Se=["growth"],we=(Object(H.a)("UNLOCK"),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.Unlock.withId(t)||Se.includes(t)||e.Unlock.create({id:t}),e.state}),Pe=Object(H.a)("TICK"),Ae=Object(H.a)("UPDATE_RESOURCE");function Re(e,t){var n=t.resourceId,a=t.value,r=Object(B.a)(t,["resourceId","value"]);if(0===a)return e.state;we(e,n);var i=a;return e.City.filter(be()(r,(function(e){return"number"===typeof e}))).toModelArray().forEach((function(e){var t=e.stockpiles.filter({resourceId:n}).first(),a=ke()(t.amount+i,0,t.limit);i=t.amount+i-a,t.update({amount:a})})),e.state}var De=Object(H.a)("EXPLORE"),Ne=Object(H.a)("SETTLE"),Me={INIT:function(e){return 0===e.System.all().toRefArray().length&&(te.forEach((function(t){return e.Buyable.create(Object(U.a)({},t))})),ee.forEach((function(t){return e.Resource.create(Object(U.a)(Object(U.a)({},t),{},{amount:0}))})),Y.forEach((function(t){return e.Task.create(Object(U.a)({},t))})),F.forEach((function(t){var n=Object.assign({},t);return e.DistrictType.create(Object(U.a)({},n))})),ye()(fe.a.apply(void 0,Object(G.a)(q)),(function(){return xe(e,{})})),re(e,{plotId:e.Plot.first().id}),we(e,"center"),Re(e,{resourceId:"food",id:0,value:100}),ne.forEach((function(t){return we(e,t)}))),e.state},CREATE_CONTINENT:je,EXPLORE:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.systemId,r=n.planetId,i=n.continentId;if("number"===typeof a){var c=e.System.withId(a);t=c.planets.exclude({explored:!0}).first()}else if("number"===typeof r){var o=e.Planet.withId(r);t=o.continents.exclude({explored:!0}).first()}else if("number"===typeof i){var l=e.Continent.withId(i);t=l.plots.exclude({explored:!0}).first()}else t=e.System.exclude({explored:!0}).first();return t.update({explored:!0}),e.state},SETTLE:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.systemId,r=n.planetId,i=n.continentId;if("number"===typeof a){var c=e.System.withId(a);t=c.planets.first().continents.first().plots.first().id}else if("number"===typeof r){var o=e.Planet.withId(r);t=o.continents.first().plots.first().id}else if("number"===typeof i){var l=e.Continent.withId(i);t=l.plots.first().id}return re(e,{plotId:t}),e.state},CREATE_CITY:re,CREATE_SEAT:le,CREATE_PERSON:ue,CREATE_BUILDING:ce,CREATE_PLOT:he,CREATE_PLANET:ve,CREATE_SYSTEM:xe,UPDATE_RESOURCE:Re,TICK:function(e){var t=[];return function(e,t){e.City.all().toModelArray().forEach((function(e){t.push({resourceId:"food",id:e.id,value:.2*-e.people.all().toModelArray().length})}))}(e,t),function(e,t){e.Seat.all().toModelArray().forEach((function(e){var n=e.task,a=n.effects,r=n.duration,i=e.district.city.id;if(e.progress>=r)return a.forEach((function(e){var n=e.id,a=e.value;Array.isArray(a)&&(a=X()(a)),a*=500,t.push({resourceId:n,value:a,id:i})})),e.update({progress:0});e.update({progress:e.person?e.progress+1:e.progress})}))}(e,t),function(e,t){e.City.all().toModelArray().forEach((function(n){var a=n.people.all().toRefArray().length,r=n.stockpiles.all().toRefArray().find((function(e){return"growth"===e.resourceId}));a<n.housing&&(t.push({resourceId:"growth",id:n.id,value:1}),r&&r.amount>=5&&(ue(e,{cityId:n.id}),t.push({resourceId:"growth",id:n.id,value:-5})))}))}(e,t),t.forEach((function(t){return Re(e,t)})),e.state},DRAG:function(e,t){var n=t.source,a=t.destination,r=t.draggableId;if(!a)return e.state;var i=e.Person.all().toModelArray().find((function(e){return"".concat(e.id)===r}));if(n.droppableId===a.droppableId){var c=e.Person.all().toModelArray().find((function(e){return e._fields.index===a.index}));i&&i.update({index:a.index}),c&&c.update({index:n.index})}else{var o=e.Seat.withId(a.droppableId.split("-")[1]);if(i.seat)e.Seat.withId(i.seat.id).personId=null;o&&o.update({personId:i.id})}return e.state}},_e=Object(s.a)((function(e,t){return Object(p.b)(e)}),(function(e,t){return Object(p.a)(e)})),Le={key:"root",storage:f.a,stateReconciler:b.a,transforms:[_e]},Be=Object(s.b)(Le,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L.getEmptyState(),t=arguments.length>1?arguments[1]:void 0,n=Me[t.type];return n?n(L.session(e),t.payload):e})),Ge=Object(u.c)({root:Be}),Ue=Object(u.e)(Ge,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),He=Object(s.c)(Ue),Ve=Ue,ze=(n(1333),n(155)),We=n(71),Xe=n(1353),Ke=n(1355),Fe=n(1356),Ye=n(11),qe=n(50),Je=n(1352),Ze=function(e){var t=e.items,n=Object(B.a)(e,["items"]);return r.a.createElement(We.c,n,(function(e,n){return r.a.createElement("div",{ref:e.innerRef,style:{background:n.isDraggingOver?"lightblue":"lightgrey",padding:8,minWidth:60,display:"flex",minHeight:55}},r.a.createElement(Qe,{items:t}),e.placeholder)}))},Qe=r.a.memo((function(e){return e.items.map((function(e,t){return r.a.createElement(We.b,{key:e.id+t,draggableId:"".concat(e.id),index:t},(function(n,a){return r.a.createElement("div",Object.assign({ref:n.innerRef},n.draggableProps,n.dragHandleProps,{style:Object(U.a)({userSelect:"none",padding:8,marginRight:8,display:"flex",justifyContent:"center",alignItems:"center",minHeight:40,textAlign:"center",position:"relative",zIndex:a.isDragging?20:1,background:a.isDragging?"lightgreen":"grey"},n.draggableProps.style)}),r.a.createElement($e,{item:e,index:t}))}))}))})),$e=r.a.memo((function(e){return r.a.createElement("span",null,e.item.label)})),et=n(1359),tt=function(e){var t={};return e.forEach((function(e){var n=e.amount,a=e.limit,r=e.resourceId,i=e.color;t[r]=t[r]||{amount:0,limit:0,color:i},t[r].amount+=n,t[r].limit+=a})),t},nt=Object(et.a)(L,(function(e){return e.Unlock.all().toModelArray().map((function(e){return e.ref.id}))})),at=Object(et.a)(L.Buyable),rt=Object(et.a)(L.ResourceStockpile),it=Object(et.a)(L,rt,(function(e,t){return tt(t)})),ct=Object(et.a)(L.DistrictType),ot=(Object(et.a)(L.District),Object(et.a)(L.Person)),lt=Object(et.a)(L.Task),ut=Object(et.a)(L.District.seats),st=Object(et.a)(L.District.districtType),dt=Object(et.a)(L.City),ft=Object(et.a)(L.City.plot.continent),mt=(Object(et.a)(L.Person.seat),Object(et.a)(L.City.plot)),bt=Object(et.a)(L.City.stockpiles),pt=Object(et.a)(L.City.districts),yt=Object(et.a)(L,L.City.people,(function(e,t){return t?t.filter((function(e){return!!e})).map((function(t){var n=e.Seat.all().toModelArray().find((function(e){return e.personId===t.id}));return Object(U.a)(Object(U.a)({},t),{},{seat:n?n.ref:null})})):[]})),Ot=Object(et.a)(L,bt,(function(e,t){return tt(t)})),jt=function(e){var t=e.seat,n=Object(o.d)((function(e){return lt(e,t.taskId)})),a=Object(o.d)((function(e){return ot(e,"number"===typeof t.personId?t.personId:null)})),i=1-t.progress/n.duration;return r.a.createElement(Ke.a,{display:"flex",flexDirection:"column",flex:1,maxWidth:90},r.a.createElement(Ke.a,{style:{flex:1,marginRight:8,position:"relative",backgroundColor:"lightgray",borderRadius:4,overflow:"hidden"}},r.a.createElement(Ke.a,{position:"relative"},r.a.createElement(Ke.a,{position:"relative",style:{borderBottom:"1px solid #999"}},r.a.createElement(Je.a,{style:{textAlign:"center",position:"relative",zIndex:2}},n.id),"number"===typeof i&&r.a.createElement(Ke.a,{position:"absolute",bgcolor:"green",top:0,left:0,bottom:0,style:{transition:"right ".concat(500,"ms"),transitionTimingFunction:"linear",zIndex:1},right:"".concat(100*i,"%")})),r.a.createElement(Ke.a,{display:"flex",justifyContent:"center"},r.a.createElement(Ke.a,{minHeight:56,position:"relative",m:1},r.a.createElement(Ke.a,{position:"absolute",bgcolor:"gray",top:0,left:0,right:0,bottom:0,style:{pointerEvents:"none",opacity:.3,zIndex:1}}),r.a.createElement(Ze,{droppableId:"seat-".concat(t.id),isDropDisabled:!!a,items:a?[a]:[]}))))))},ht=n(109),Et=n.n(ht),It=n(159),vt=Object(et.a)(L.Continent),gt=Object(et.a)(L.Continent.planet),xt=Object(et.a)(L.Continent.plots),Ct=Object(et.a)(L.Continent.plots.map(L.Plot.city)),kt=Object(et.a)(L.Continent.plots.map(L.Plot.city.stockpiles)),Tt=Object(et.a)(L,kt,(function(e,t){return tt(t.flat(5).filter((function(e){return!!e})))})),St=Object(et.a)(L.Planet),wt=Object(et.a)(L.Planet.system),Pt=Object(et.a)(L.Planet.continents),At=Object(et.a)(L.Planet.continents.map(L.Continent.plots.map(L.Plot.city))),Rt=Object(et.a)(L.Planet.continents.map(L.Continent.plots.map(L.Plot.city.stockpiles))),Dt=Object(et.a)(L,Rt,(function(e,t){return tt(t.flat(5).filter((function(e){return!!e})))})),Nt=Object(et.a)(L.System),Mt=Object(et.a)(L.System.planets),_t=Object(et.a)(L.System.planets.map(L.Planet.continents.map(L.Continent.plots.map(L.Plot.city)))),Lt=Object(et.a)(L.System.planets.map(L.Planet.continents.map(L.Continent.plots.map(L.Plot.city.stockpiles)))),Bt=Object(et.a)(L,Lt,(function(e,t){return tt(t.flat(5).filter((function(e){return!!e})))})),Gt=function(e){var t=e.id,n=e.label,a=e.action,i=e.disabled,c=Object(B.a)(e,["id","label","action","disabled"]),l=Object(o.c)(),u=Object(o.d)(at).find((function(e){return e.id===t})),s=Ut(Object(U.a)({buyable:u},c));if(!u)return null;var d=JSON.stringify(u.cost).replace(/"/g,"").replace(/\{|\}/g,""),f=function(){var e=Object(It.a)(Et.a.mark((function e(){return Et.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i||!s){e.next=5;break}return e.next=3,Promise.all(Object.entries(u.cost).map((function(e){var t=Object(qe.a)(e,2),n=t[0],a=t[1];return l(Ae(Object(U.a)({resourceId:n,value:-a},c)))})));case 3:return e.next=5,l(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(Fe.a,{onClick:f,style:{display:"block",opacity:!i&&s?1:.5}},n||u.label," (",d,")")},Ut=function(e){var t=e.buyable,n=Object(B.a)(e,["buyable"]),a=Ht(n);return!!t&&Object.entries(t.cost).every((function(e){var t=Object(qe.a)(e,2),n=t[0],r=t[1],i=Object.entries(a).map((function(e){var t=Object(qe.a)(e,2);return{resourceId:t[0],amount:t[1].amount}})).find((function(e){return e.resourceId===n}));return!!i&&(r<=i.amount?i.amount:0)}))},Ht=function(e){var t=e.cityId,n=e.continentId,a=e.planetId,r=e.systemId;return Object(o.d)((function(e){return"number"===typeof t?Ot(e,+t):"number"===typeof n?Tt(e,+n):"number"===typeof a?Dt(e,+a):"number"===typeof r?Bt(e,+r):it(e)}))},Vt=n(160),zt=n.n(Vt),Wt=function(e){var t=e.continentId,n=e.cityId,a=e.districts,i=Object(o.d)(nt),c=Object(o.d)(ct).filter((function(e){return!a.map((function(e){return e.districtTypeId})).includes(e.id)}));return r.a.createElement(Ke.a,null,a.filter((function(e){return i.includes(e.districtTypeId)})).map((function(e){return r.a.createElement(Xt,{key:"district-".concat(e.id),districtId:e.id,continentId:t,cityId:n})})),c.filter((function(e){return i.includes(e.districtTypeId)})).map((function(e){return r.a.createElement(Gt,{key:e.id,id:"createDistrict",label:"buy ".concat(e.label),cityId:+n,action:ie({cityId:n,districtTypeId:e.id})})})))},Xt=function(e){var t=e.continentId,n=e.cityId,a=e.districtId,i=Object(o.d)((function(e){return st(e,a)})),c=Object(o.d)((function(e){return ut(e,a)})),l=zt()(c,(function(e){return e.taskId}));return r.a.createElement(Ke.a,{mb:3},r.a.createElement(Je.a,null,i.label),Object.entries(l).map((function(e,i){var c=Object(qe.a)(e,2),o=c[0],l=c[1];return r.a.createElement(Kt,{key:o,taskId:o,seats:l,index:i,id:a,continentId:t,cityId:n})})))},Kt=function(e){return r.a.createElement(Ke.a,{display:"flex"},e.seats.map((function(t){return r.a.createElement(jt,{key:"task".concat(t.id),index:e.index,seat:t})})),r.a.createElement(Gt,{continentId:+e.continentId,id:"buySeat",cityId:+e.cityId,action:oe({districtId:e.id,taskId:e.taskId})}))},Ft=function(e){var t=e.people;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ze,{droppableId:"people",items:t.filter((function(e){return!e.seat})).sort((function(e,t){return e.index-t.index}))}))},Yt=n(110),qt=n.n(Yt),Jt=n(161),Zt=function(e){var t=e.resource;return r.a.createElement(Ke.a,{"data-tip":t.resourceId,display:"flex"},r.a.createElement(Ke.a,null,r.a.createElement(Je.a,{style:{color:t.color,fontWeight:"bold"}},t.resourceId,":")),r.a.createElement(Ke.a,{ml:1,display:"flex",flexDirection:"row",alignItems:"center"},r.a.createElement(Je.a,null,qt()(t.amount).format("0,0.0"),"/",qt()(t.limit).format("0,0"))))},Qt=function(e){var t=e.hide,n=e.resources,a=Object(o.d)(nt);if(t)return null;var i=n;return Array.isArray(n)||(i=Object.entries(n).map((function(e){var t=Object(qe.a)(e,2),n=t[0],a=t[1];return Object(U.a)({resourceId:n},a)}))),r.a.createElement(Ke.a,{className:"flex flex-column",my:1},i.filter((function(e){return a.includes(e.resourceId)})).map((function(e){return r.a.createElement(Ke.a,{key:e.resourceId,display:"flex",flexDirection:"row"},r.a.createElement(Zt,{resource:e}))})),r.a.createElement(Jt.a,null))},$t=function(e){var t=e.children,n=e.sidebar;return r.a.createElement(Ke.a,{display:"flex"},r.a.createElement(Ke.a,{display:"flex",flexDirection:"column",flex:3,minWidth:150,p:1},n),r.a.createElement(Ke.a,{flex:7,p:1},t))},en=function(e){var t=e.label,n=e.resources,a=e.linkText,i=e.uri,c=e.children;return r.a.createElement(r.a.Fragment,null,i?r.a.createElement("a",{href:i},a):r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("span",null,t),c,r.a.createElement(Qt,{resources:n}))},tn=function(){var e=Object(Ye.f)().id,t=void 0===e?"0":e,n=Object(o.d)((function(e){return dt(e,+t)})),a=Object(o.d)((function(e){return ft(e,+t)})),i=Object(o.d)((function(e){return mt(e,+t)})),c=Object(o.d)((function(e){return yt(e,+t)})),l=Object(o.d)((function(e){return bt(e,+t)})),u=Object(o.d)((function(e){return pt(e,+t)})),s=Object(o.d)(nt);return n?r.a.createElement($t,{sidebar:r.a.createElement(en,{uri:s.includes("continent")&&"#/continent/".concat(a.id),linkText:s.includes("continent")&&"Back to ".concat(a.label),label:"City: ".concat(n.label),resources:l},r.a.createElement("span",null,"biome: ",i.biome),r.a.createElement("span",null,"housing: ",c.length,"/",n.housing))},r.a.createElement(Ft,{people:c}),r.a.createElement(Wt,{continentId:a.id,cityId:n.id,districts:u})):null},nn=function(){var e=Object(Ye.f)().id,t=void 0===e?"0":e,n=Object(o.d)((function(e){return vt(e,+t)})),a=Object(o.d)((function(e){return gt(e,+t)})),i=Object(o.d)((function(e){return Ct(e,+t).filter((function(e){return!!e}))})),c=Object(o.d)((function(e){return xt(e,+t)})),l=Object(o.d)((function(e){return Tt(e,+t)})),u=Object(o.d)(nt);return n?r.a.createElement($t,{sidebar:r.a.createElement(en,{uri:u.includes("planet")&&"#/planet/".concat(a.id),linkText:u.includes("planet")&&"Back to ".concat(a.label),label:"Continent: ".concat(n.label),resources:l})},r.a.createElement("span",null,"Cities:"),r.a.createElement(Ke.a,{display:"flex",flexDirection:"column"},i.map((function(e){return r.a.createElement(an,{key:e.id,city:e})}))),c.filter((function(e){return"number"!==typeof e.cityId&&e.explored})).map((function(e){return r.a.createElement(Ke.a,{key:"".concat(e.id,"-explore"),display:"flex",alignItems:"center"},r.a.createElement(Gt,{continentId:+t,id:"buyCity",action:ae({plotId:e.id})}),r.a.createElement(Je.a,null,e.biome))})),c.filter((function(e){return!e.city&&!e.explored})).length>0&&r.a.createElement(Gt,{continentId:+t,id:"exploreContinent",action:De({continentId:n.id})})):null},an=function(e){var t=e.city;return r.a.createElement(Ke.a,{my:1,display:"flex",alignItems:"center"},r.a.createElement("a",{href:"#/city/".concat(t.id),style:{marginRight:8}},t.label),r.a.createElement(Qt,{hide:!0,resources:t.stockpiles}))},rn=function(){var e=Object(Ye.f)().id,t=void 0===e?"0":e,n=Object(o.d)((function(e){return St(e,t)})),a=Object(o.d)((function(e){return Pt(e,t)})),i=Object(o.d)((function(e){return Dt(e,+t)})),c=Object(o.d)(nt),l=Object(o.d)((function(e){return wt(e,t)}));return n?r.a.createElement($t,{sidebar:r.a.createElement(en,{uri:c.includes("system")&&"#/system/".concat(l.id),linkText:c.includes("system")&&"Back to ".concat(l.label),label:"Planet: ".concat(n.label),resources:i},r.a.createElement("span",null,n.type.id))},r.a.createElement("span",null,"Continents:"),r.a.createElement(Ke.a,{display:"flex",flexDirection:"column"},a.filter((function(e){return e.explored})).map((function(e){return r.a.createElement(cn,{key:e.id,continent:e})}))),a.filter((function(e){return!e.explored})).length>0&&r.a.createElement(Gt,{planetId:+t,id:"explorePlanet",action:De({planetId:n.id})})):null},cn=function(e){var t=e.continent,n=Object(o.d)((function(e){return Tt(e,t.id)})),a=Object(o.d)((function(e){return Ct(e,t.id).filter((function(e){return!!e}))}));return r.a.createElement(Ke.a,{my:1,display:"flex",alignItems:"center"},r.a.createElement("a",{href:"#/continent/".concat(t.id),style:{marginRight:8}},t.label),r.a.createElement(Qt,{hide:!0,resources:n}),0===a.length&&r.a.createElement(Gt,{id:"settleContinent",action:Ne({continentId:t.id})}))},on=function(){var e=Object(Ye.f)().id,t=void 0===e?"0":e,n=Object(o.d)((function(e){return Nt(e,+t)})),a=Object(o.d)((function(e){return Mt(e,+t)})),i=Object(o.d)((function(e){return Bt(e,+t)})),c=Object(o.d)(nt);return r.a.createElement($t,{sidebar:r.a.createElement(en,{uri:c.includes("galaxy")&&"#/",linkText:c.includes("galaxy")&&"Back to Galaxy",label:"System: ".concat(n.label),resources:i})},r.a.createElement("span",null,"Planets:"),r.a.createElement(Ke.a,{display:"flex",flexDirection:"column"},a.filter((function(e){return e.explored})).map((function(e){return r.a.createElement(ln,{key:e.id,planet:e})}))),a.filter((function(e){return!e.explored})).length>0&&r.a.createElement(Gt,{systemId:n.id,id:"exploreContinent",action:De({systemId:n.id})}))},ln=function(e){var t=e.planet,n=Object(o.d)((function(e){return Dt(e,t.id)})),a=Object(o.d)((function(e){return At(e,t.id).flat(5).filter((function(e){return!!e}))}));return r.a.createElement(Ke.a,{my:1,display:"flex",alignItems:"center"},r.a.createElement("a",{href:"#/planet/".concat(t.id),style:{marginRight:8}},t.label),r.a.createElement(Qt,{hide:!0,resources:n}),0===a.length&&r.a.createElement(Gt,{systemId:t.systemId,id:"settlePlanet",action:Ne({planetId:t.id})}))},un=function(){var e=Object(o.d)(Nt),t=Object(o.d)(it);return r.a.createElement($t,{sidebar:r.a.createElement(en,{label:"Galaxy",resources:t})},r.a.createElement("span",null,"Systems:"),r.a.createElement(Ke.a,{display:"flex",flexDirection:"column"},e.filter((function(e){return e.explored})).map((function(e){return r.a.createElement(sn,{key:e.id,system:e})}))),e.filter((function(e){return!e.explored})).length>0&&r.a.createElement(Gt,{id:"exploreGalaxy",action:De()}))},sn=function(e){var t=e.system,n=Object(o.d)((function(e){return Bt(e,t.id)})),a=Object(o.d)((function(e){return _t(e,t.id)}));return r.a.createElement(Ke.a,{my:1,display:"flex",alignItems:"center"},r.a.createElement("a",{href:"#/system/".concat(t.id),style:{marginRight:8}},t.label),r.a.createElement(Qt,{hide:!0,resources:n}),0===a.length&&r.a.createElement(Gt,{id:"settleSystem",action:Ne({systemId:t.id})}))},dn=function(){var e=Object(o.d)(nt);return r.a.createElement(Ye.c,null,e.includes("system")&&r.a.createElement(Ye.a,{exact:!0,path:"/system/:id",render:function(){return r.a.createElement(on,null)}}),e.includes("planet")&&r.a.createElement(Ye.a,{exact:!0,path:"/planet/:id",render:function(){return r.a.createElement(rn,null)}}),e.includes("continent")&&r.a.createElement(Ye.a,{exact:!0,path:"/continent/:id",render:function(){return r.a.createElement(nn,null)}}),r.a.createElement(Ye.a,{exact:!0,path:"/city/:id",render:function(){return r.a.createElement(tn,null)}}),r.a.createElement(Ye.a,{path:"*",render:function(){return e.includes("galaxy")?r.a.createElement(un,null):e.includes("system")?r.a.createElement(on,null):e.includes("planet")?r.a.createElement(rn,null):e.includes("continent")?r.a.createElement(nn,null):r.a.createElement(tn,null)}}))},fn=function(){var e=Object(o.c)();return Object(a.useEffect)((function(){e(Te())}),[e]),Object(a.useEffect)((function(){var t=setInterval((function(){e(Pe())}),500);return function(){return clearInterval(t)}}),[e]),r.a.createElement(Xe.a,null,r.a.createElement(We.a,{onDragEnd:function(t){var n=t.source,a=t.destination,r=Object(B.a)(t,["source","destination"]);return e(se(Object(U.a)({source:n,destination:a},r)))}},r.a.createElement(dn,null),r.a.createElement(Ke.a,{position:"fixed",bottom:0,right:0},r.a.createElement(Fe.a,{onClick:function(){He.purge(),localStorage.removeItem("hasSession"),window.location="/#/city/0",window.location.reload()}},"Clear save"))))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(o.a,{store:Ve},r.a.createElement(l.a,null,r.a.createElement(ze.a,{loading:null,persistor:He},r.a.createElement(fn,null))))),document.getElementById("root"))},167:function(e,t,n){e.exports=n(1339)}},[[167,1,2]]]);
//# sourceMappingURL=main.4c7f88cb.chunk.js.map