(this.webpackJsonptycoon=this.webpackJsonptycoon||[]).push([[0],{1322:function(e,t,n){},1329:function(e,t,n){"use strict";n.r(t);var a=n(3),r=n(22),i=n(0),c=n.n(i),o=n(35),l=n.n(o),u=n(7),s=n(102),d=n(68),f=n(1343),b=n(1345),m=n(1346),p=n(27),y=Object(p.a)("INIT"),O=Object(p.a)("TICK"),h=Object(p.a)("DRAG"),E=Object(p.a)("UPDATE_RESOURCE"),j=(Object(p.a)("CREATE_PERSON"),Object(p.a)("CREATE_CONTINENT"),Object(p.a)("EXPLORE")),g=Object(p.a)("SETTLE"),I=Object(p.a)("CREATE_BUILDING"),v=Object(p.a)("CREATE_CITY"),x=(Object(p.a)("CREATE_PLANET"),Object(p.a)("CREATE_SYSTEM"),Object(p.a)("CREATE_SEAT")),C=(Object(p.a)("UNLOCK"),n(18)),k=n(89),T=n(12),S=n(15),w=n(14),R=n(78),A=n(85),P=function(e){Object(S.a)(n,e);var t=Object(w.a)(n);function n(){return Object(T.a)(this,n),t.apply(this,arguments)}return n}(R.a);P.modelName="Task",P.fields={id:Object(A.a)(),duration:Object(A.a)(),effects:Object(A.a)()};var N=function(e){Object(S.a)(n,e);var t=Object(w.a)(n);function n(){return Object(T.a)(this,n),t.apply(this,arguments)}return n}(R.a);N.modelName="Seat",N.fields={buildingId:Object(A.b)({to:"Building",as:"building"}),taskId:Object(A.b)({to:"Task",as:"task"}),personId:Object(A.b)({to:"Person",as:"person"})};var B=function(e){Object(S.a)(n,e);var t=Object(w.a)(n);function n(){return Object(T.a)(this,n),t.apply(this,arguments)}return n}(R.a);B.modelName="BuildingType",B.fields={id:Object(A.a)(),label:Object(A.a)(),tasks:Object(A.a)()};var D=function(e){Object(S.a)(n,e);var t=Object(w.a)(n);function n(){return Object(T.a)(this,n),t.apply(this,arguments)}return n}(R.a);D.modelName="Building",D.fields={id:Object(A.a)(),buildingTypeId:Object(A.b)({to:"BuildingType",as:"buildingType"}),seats:Object(A.c)("Seat","buildings")};var _=function(e){Object(S.a)(n,e);var t=Object(w.a)(n);function n(){return Object(T.a)(this,n),t.apply(this,arguments)}return n}(R.a);_.modelName="City",_.fields={id:Object(A.a)(),buildings:Object(A.c)("Building","city"),housing:Object(A.a)(),resources:Object(A.c)("ResourceStockpile","city"),people:Object(A.c)("Person","city")};var L=function(e){Object(S.a)(n,e);var t=Object(w.a)(n);function n(){return Object(T.a)(this,n),t.apply(this,arguments)}return n}(R.a);L.modelName="Continent",L.fields={id:Object(A.a)(),explored:Object(A.a)(),biomes:Object(A.a)(),plots:Object(A.c)("Plot","continent")};var G=function(e){Object(S.a)(n,e);var t=Object(w.a)(n);function n(){return Object(T.a)(this,n),t.apply(this,arguments)}return n}(R.a);G.modelName="Resource",G.fields={id:Object(A.a)()};var M=function(e){Object(S.a)(n,e);var t=Object(w.a)(n);function n(){return Object(T.a)(this,n),t.apply(this,arguments)}return n}(R.a);M.modelName="Buyable",M.fields={id:Object(A.a)(),label:Object(A.a)(),cost:Object(A.a)()};var U=function(e){Object(S.a)(n,e);var t=Object(w.a)(n);function n(){return Object(T.a)(this,n),t.apply(this,arguments)}return n}(R.a);U.modelName="ResourceStockpile",U.fields={id:Object(A.a)(),resourceId:Object(A.b)({to:"Resource",as:"resource"}),amount:Object(A.a)(),limit:Object(A.a)()};var H=function(e){Object(S.a)(n,e);var t=Object(w.a)(n);function n(){return Object(T.a)(this,n),t.apply(this,arguments)}return n}(R.a);H.modelName="Person",H.fields={id:Object(A.a)(),seat:Object(A.a)()};var V=function(e){Object(S.a)(n,e);var t=Object(w.a)(n);function n(){return Object(T.a)(this,n),t.apply(this,arguments)}return n}(R.a);V.modelName="Plot",V.fields={id:Object(A.a)(),cities:Object(A.c)("City","plot")};var W=function(e){Object(S.a)(n,e);var t=Object(w.a)(n);function n(){return Object(T.a)(this,n),t.apply(this,arguments)}return n}(R.a);W.modelName="Planet",W.fields={id:Object(A.a)(),type:Object(A.a)(),continents:Object(A.c)("Continent","planet")};var z=function(e){Object(S.a)(n,e);var t=Object(w.a)(n);function n(){return Object(T.a)(this,n),t.apply(this,arguments)}return n}(R.a);z.modelName="System",z.fields={id:Object(A.a)(),explored:Object(A.a)(),planets:Object(A.c)("Planet","system")};var X=function(e){Object(S.a)(n,e);var t=Object(w.a)(n);function n(){return Object(T.a)(this,n),t.apply(this,arguments)}return n}(R.a);X.modelName="Unlock",X.fields={id:Object(A.a)()};var K=new k.a({stateSelector:function(e){return e.root}});K.register(P,D,G,H,W,z,X,V,N,B,U,_,M,L);var Y=K,F=n(48),q=n(36),J=n.n(q),Z=n(45),Q=n.n(Z),$=n(46),ee=n.n($),te=["Kilgate","Dustfair","Deadbreak","Greenscar","Silkbreak","Cragborough","Greenfrost","Snowhelm","Midacre","Fearvalley","Shadekeep","Steamvein","Tradespell","Westshell","Northreach","Fairrun","Oakenshire","Windhall","Redfrost","Glimmerborn","Redwick","Quicktown","Stormgulf","Deepgarde","Craghall","Lakeharbor","Bonehaven","Greenhand","Newshear","Puremere","Cloudwell","Oceanmoor","Rosehand","Boulderward","Sleettide","Bleakpost","Limehallow","Whalehall","Roguehelm","Knightcoast","Smoothcoast","Ebonwell","Basinfall","Winterview","Cursetide","Ravenborough","Boulderwind","Steelvale","Beachbury","Springfront"],ne=["Uphavis","Togrinus","Canzarvis","Xanvara","Suicury","Zopra","Cheutov","Vuyonus","Tryria BL","Moth I2W","Tachaistea","Rigrithea","Delmeshan","Chidrilia","Thahiri","Soturn","Llutetune","Mupeyama","Gillon P8E8","Phurn 8U7","Thibbunus","Tolnoavis","Modillon","Yallagua","Xiastea","Xounia","Nozacarro","Phusiyama","Dapus 6552","Llov 0310","Onnelea","Komaerus","Monnore","Thunkyke","Luamia","Keistea","Gapenides","Trodenus","Gyria 84WZ","Gnone 21SV","Runzoaclite","Bestritania","Ollilles","Yobomia","Vatune","Duistea","Drosenus","Grooruta","Chypso 75","Lion 6S1Z"],ae=[{id:"earthlike",biomes:["forest","mountain","tundra","plain"]}],re=["Andromeda","Antlia","Apus","Aquarius","Aquila","Ara","Aries","Auriga","Bootes","Caelum","Camelopardalis","Cancer","Canes Venatici","Canis Major","Canis Minor","Capricornus","Carina","Cassiopeia","Centaurus","Cepheus","Cetus","Chamaeleon","Circinus","Columba","Coma Berenices","Corona Australis","Corona Borealis","Corvus","Crater","Crux","Cygnus","Delphinus","Dorado","Draco","Equuleus","Eridanus","Fornax","Gemini","Grus","Hercules","Horologium","Hydra","Hydrus","Indus","Lacerta","Leo","Leo Minor","Lepus","Libra","Lupus","Lynx","Lyra","Mensa","Microscopium","Monoceros","Musca","Norma","Octans","Ophiuchus","Orion","Pavo","Pegasus","Perseus","Phoenix","Pictor","Pisces","Piscis Austrinus","Puppis","Pyxis","Reticulum","Sagitta","Sagittarius","Scorpius","Sculptor","Scutum","Serpens","Sextans","Taurus","Telescopium","Triangulum","Triangulum Australe","Tucana","Ursa Major","Ursa Minor","Vela","Virgo","Volans","Vulpecula"],ie=["Ihaes","Clopath","Prafica","Eadari","Aecoya","Auhela","Heuvruprix","Yamiuyith","Vraeholall","Wekraitruin","Shulela","Awin","Utun","Iuslos","Vleorath","Miogaes","Iyuagea","Aibutend","Jiodrefias","Breidimune","Fohira","Drafos","Owios","Euyune","Aebran","Ogoa","Cuslaizor","Sledaudon","Iakeheron","Tiukunoth","Ulul","Olix","Vlizos","Drowrand","Eikrin","Eucrora","Sleiqiseth","Klaepimuin","Yaibrohall","Griufowos","Hotox","Amela","Egela","Traphith","Eubres","Heacax","Eohipor","Qaeshufix","Iazulela","Aewimix"],ce=[{id:"center",label:"City Center",tasks:[{id:"scavenge"}]},{id:"barracks",label:"Encampment",tasks:[{id:"hunt"}]},{id:"industry",label:"Industrial Zone",tasks:[{id:"mine"},{id:"chop"}]},{id:"church",label:"Holy Site",tasks:[{id:"pray"}]},{id:"campus",label:"Campus",tasks:[{id:"study"}]},{id:"market",label:"Commercial Hub",tasks:[{id:"trade"}]},{id:"theatre",label:"Theatre Square",tasks:[{id:"perform"}]}],oe=[{id:"scavenge",duration:1,effects:[{id:"food",value:J()(1,4)},{id:"wood",value:function(){return ee()([0,0,0,.1,.2])}}]},{id:"chop",biome:["forest"],duration:1,effects:[{id:"wood",value:1}]},{id:"farm",biome:["plain"],duration:1,effects:[{id:"food",value:10}]},{id:"mine",biome:["mountain"],duration:1,effects:[{id:"stone",value:1}]},{id:"pray",duration:1,effects:[{id:"faith",value:1}]},{id:"hunt",duration:1,effects:[{id:"fur",value:1}]},{id:"trade",duration:1,effects:[{id:"gold",value:1}]},{id:"perform",duration:1,effects:[{id:"culture",value:1}]},{id:"study",duration:1,effects:[{id:"science",value:1}]},1],le=[{id:"buySeat",label:"+ seat",cost:{wood:10}},{id:"createBuilding",label:"+ building",cost:{wood:50}},{id:"buyCity",label:"+ city",cost:{wood:100}},{id:"exploreContinent",label:"explore",cost:{wood:1e3}},{id:"settleContinent",label:"settle continent",cost:{wood:500}},{id:"explorePlanet",label:"explore ocean",cost:{wood:1e4}},{id:"settlePlanet",label:"settle planet",cost:{wood:5e3}},{id:"exploreSystem",label:"explore stars",cost:{wood:1e5}},{id:"settleSystem",label:"settle system",cost:{wood:5e4}},{id:"exploreGalaxy",label:"explore systems",cost:{wood:1e6}}],ue=[{id:"food",limit:500,color:"#f95757"},{id:"wood",limit:100,color:"#905100"},{id:"fur",limit:100,color:"#d0865b"},{id:"stone",limit:100,color:"#8a8a8a"},{id:"faith",limit:100,color:"#9093ff"},{id:"gold",limit:100,color:"#f1ba1a"},{id:"science",limit:100,color:"#090eb5"},{id:"culture",limit:100,color:"#ab16c5"},{id:"growth",limit:100,color:"#000000"}],se=function(e,t){var n=e.all().toRefArray().map((function(e){return e.label}));return ee()(t.filter((function(e){return!n.includes(e)})))},de=[3,3],fe=[2,5],be=[2,4],me=[2,6],pe=["food","wood","fur","stone","faith","gold","science","culture","center","scavenge","barracks","hunt","industry","mine","chop","church","pray","campus","study","market","trade","theatre","perform","galaxy","system","planet","continent"],ye=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.continentId,i=Object(r.a)(t,["continentId"]),c=e.Continent.withId(n),o=e.Plot.create(Object(a.a)(Object(a.a)({},i),{},{biome:ee()(c.biomes)}));return c.plots.add(o),e.state},Oe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.planetId,i=t.label,c=void 0===i?se(e.Continent,ie):i,o=Object(r.a)(t,["planetId","label"]),l=e.Planet.withId(n),u=e.Continent.create(Object(a.a)(Object(a.a)({},o),{},{explored:!1,biomes:l.type.biomes,label:c}));return l.continents.add(u),Q()(J.a.apply(void 0,Object(F.a)(me)),(function(){return ye(e,{continentId:u.id})})),e.state},he=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.systemId,i=Object(r.a)(t,["systemId"]),c=e.Planet.create(Object(a.a)(Object(a.a)({},i),{},{type:ee()(ae),label:se(e.Planet,ne)})),o=e.System.withId(n);return o.planets.add(c),Q()(J.a.apply(void 0,Object(F.a)(be)),(function(){return Oe(e,{planetId:c.ref.id})})),e.state},Ee=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.System.create(Object(a.a)(Object(a.a)({},t),{},{explored:!1,label:se(e.System,re)}));return Q()(J.a.apply(void 0,Object(F.a)(fe)),(function(){return he(e,{systemId:n.ref.id})})),e.state},je=n(143),ge=n.n(je),Ie=function(e,t){var n=t.cityId,r=t.person,i=e.City.withId(n),c=e.Person.create(Object(a.a)({label:ge.a.name.firstName()},r));return i.people.add(c),e.state},ve=function(e,t){var n=t.buildingId,a=t.taskId,r=e.Building.withId(n),i=e.Seat.create({progress:0,taskId:a});return r.seats.add(i),e.state},xe=n(1348),Ce=function(e){return e.all().toModelArray()},ke=function(e){return Ce(e)[0]},Te=function(e){var t={};return e.forEach((function(e){var n=e.ref;t[n.resourceId]=t[n.resourceId]||{amount:0,limit:0,color:e.resource&&e.resource.color},t[n.resourceId].amount+=n.amount,t[n.resourceId].limit+=n.limit})),t},Se=function(e,t){for(var n=t.split("."),a=e;n.length>0;){var r=n.shift();a=ke(a[r])}return a},we=Object(xe.a)(Y,(function(e){return Ce(e.Unlock).map((function(e){return e.ref.id}))})),Re=Object(xe.a)(Y,(function(e){return Ce(e.System).map((function(t){var n=Ce(t.planets).map((function(t){return We(e,t)}));return Object(a.a)(Object(a.a)({},t.ref),{},{settled:n.some((function(e){return e.settled})),planets:n})}))})),Ae=Object(xe.a)(Y,(function(e){return Ce(e.Planet).map((function(t){return We(e,t)}))})),Pe=Object(xe.a)(Y,(function(e){return Ce(e.Continent).map((function(t){return He(e,t)}))})),Ne=Object(xe.a)(Y,(function(e){return Ce(e.City).map((function(t){return Ve(e,t)}))})),Be=Object(xe.a)(Y,(function(e){return e.Buyable.all().toRefArray()})),De=Object(xe.a)(Y,(function(e){return Ce(e.BuildingType)})),_e=Object(xe.a)(Y,(function(e){return Ce(e.ResourceStockpile)})),Le=Object(xe.a)(Y,_e,(function(e,t){return Te(t)})),Ge=function(e){return Object(xe.a)(Y,_e,(function(t,n){return Te(n.filter((function(t){return t.city.first().systemId===e})))}))},Me=function(e){return Object(xe.a)(Y,_e,(function(t,n){return Te(n.filter((function(t){return t.city.first().planetId===e})))}))},Ue=function(e){return Object(xe.a)(Y,_e,(function(t,n){return Te(n.filter((function(t){return t.city.first().continentId===e})))}))},He=function(e,t){return Object(a.a)(Object(a.a)({explored:!1},t.ref),{},{planet:ke(t.planet.all()).ref,plots:Ce(t.plots).map((function(e){return Object(a.a)({id:e.id,city:ke(e.cities)},e.ref)})),settled:Ce(t.plots).map((function(e){return ke(e.cities)})).filter((function(e){return!!e})).length>0,cities:Ce(t.plots).map((function(e){return ke(e.cities)})).filter((function(e){return!!e})).map((function(t){return Ve(e,t)}))})},Ve=function(e,t){return Object(a.a)(Object(a.a)({},t.ref),{},{people:t.people.toRefArray(),resources:Ce(t.resources).map((function(t){return Object(a.a)(Object(a.a)({},t.ref),{},{color:e.Resource.withId(t.resourceId)?e.Resource.withId(t.resourceId).ref.color:null})})),plot:ke(t.plot).ref,continent:ke(ke(t.plot).continent).ref,buildings:Ce(t.buildings).map((function(n){var r=e.BuildingType.withId(n.buildingTypeId);return Object(a.a)(Object(a.a)({},n.ref),{},{label:r?r.label:null,seats:n.seats.toRefArray().map((function(r){return Object(a.a)(Object(a.a)({},r),{},{task:e.Task.withId(r.taskId)?e.Task.withId(r.taskId).ref:null,building:Object(a.a)(Object(a.a)({},n.ref),{},{cityId:t.id}),person:r.person?Object(a.a)({},r.person._fields):null})}))})}))})},We=function(e,t){var n=Ce(t.continents).map((function(t){return He(e,t)}));return Object(a.a)(Object(a.a)({},t.ref),{},{settled:n.some((function(e){return e.settled})),system:ke(t.system).ref,continents:n})},ze=function(e,t){var n=t.cityId,i=t.buildingTypeId,c=t.seatCount,o=Object(r.a)(t,["cityId","buildingTypeId","seatCount"]),l=e.City.withId(n),u=e.Building.create(Object(a.a)({buildingTypeId:i},o));return Ce(e.BuildingType).find((function(e){return e.id===i})).tasks.forEach((function(t){for(var n=c||1;n-- >0;)ve(e,{buildingId:u.id,taskId:t.id})})),l.buildings.add(u),e.state},Xe=function(e,t){var n=t.plotId,a=t.label,r=void 0===a?se(e.City,te):a,i=t.people,c=void 0===i?[{}]:i,o=e.Plot.withId(n),l=e.Resource.all().toModelArray(),u=ke(o.continent),s=ke(u.planet),d=ke(s.system),f=e.City.create({label:r,housing:5,continentId:u.id,planetId:s.id,systemId:d.id}),b=f.ref.id;return l.forEach((function(t){var n=t.id,a=e.Resource.withId(n),r=a?a.ref.amount:0,i=500*(a?a.ref.limit:100);f.resources.add(e.ResourceStockpile.create({resourceId:n,amount:r,limit:i}))})),c.forEach((function(t){return Ie(e,{cityId:b,person:t})})),ze(e,{cityId:b,buildingTypeId:"center"}),o.update({explored:!0}),u.update({explored:!0}),s.update({explored:!0}),d.update({explored:!0}),o.cities.add(f),e.state},Ke=n(144),Ye=n.n(Ke),Fe=["growth"],qe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.Unlock.withId(t)||Fe.includes(t)||e.Unlock.create({id:t}),e.state};function Je(e,t){var n=t.resourceId,i=t.value,c=Object(r.a)(t,["resourceId","value"]);if(0===i)return e.state;qe(e,n);var o=i;return Ce(e.City).filter(Ze(Object(a.a)({},c))).forEach((function(e){var t=Ce(e.resources).find((function(e){return e.ref.resourceId===n})),a=t.ref,r=a.amount,i=a.limit,c=Ye()(r+o,0,i);o=r+o-c,t.update({amount:c})})),e.state}var Ze=function(e){var t=e.systemId,n=e.planetId,a=e.continentId,r=e.cityId;return function(e){return t?Se(e,"plot.continent.planet.system").id===+t:n?Se(e,"plot.continent.planet").id===+n:a?Se(e,"plot.continent").id===+a:!r||e.id===+r}};var Qe={INIT:function(e){return le.forEach((function(t){return e.Buyable.create(Object(a.a)({},t))})),ue.forEach((function(t){return e.Resource.create(Object(a.a)(Object(a.a)({},t),{},{amount:0}))})),oe.forEach((function(t){return e.Task.create(Object(a.a)({},t))})),ce.forEach((function(t){var n=Object.assign({},t);return e.BuildingType.create(Object(a.a)({},n))})),0===e.System.all().toRefArray().length&&(Q()(J.a.apply(void 0,Object(F.a)(de)),(function(){return Ee(e,{})})),Xe(e,{plotId:ke(e.Plot).id}),qe(e,"center"),Je(e,{resourceId:"food",cityId:0,value:100}),pe.forEach((function(t){return qe(e,t)}))),e.state},CREATE_CONTINENT:Oe,EXPLORE:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.systemId,r=n.planetId,i=n.continentId;if("number"===typeof a){var c=e.System.withId(a);t=Ce(c.planets).filter((function(e){return!e.explored}))[0]}else if("number"===typeof r){var o=e.Planet.withId(r);t=Ce(o.continents).filter((function(e){return!e.explored}))[0]}else if("number"===typeof i){var l=e.Continent.withId(i);t=Ce(l.plots).filter((function(e){return!e.explored}))[0]}else t=Ce(e.System).filter((function(e){return!e.explored}))[0];return t.update({explored:!0}),e.state},SETTLE:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.systemId,r=n.planetId,i=n.continentId;if("number"===typeof a){var c=e.System.withId(a),o=Se(c,"planets.continents.plots");t=o.id}else if("number"===typeof r){var l=e.Planet.withId(r),u=Se(l,"continents.plots");t=u.id}else if("number"===typeof i){var s=e.Continent.withId(i),d=ke(s.plots);t=d.id}return Xe(e,{plotId:t}),e.state},CREATE_CITY:Xe,CREATE_SEAT:ve,CREATE_PERSON:Ie,CREATE_BUILDING:ze,CREATE_PLOT:ye,CREATE_PLANET:he,CREATE_SYSTEM:Ee,UPDATE_RESOURCE:Je,TICK:function(e){var t=[];return function(e,t){Ce(e.Person).forEach((function(e){var n=e.city;t.push({resourceId:"food",cityId:ke(n).id,value:-.2})}))}(e,t),function(e,t){Ce(e.Seat).forEach((function(n){var a=n.ref,r=ke(n.buildings),i=e.Task.withId(a.taskId).ref,c=i.effects,o=i.duration,l=r.city.all().toRefArray()[0].id;if(a.progress>=o)return c.forEach((function(e){var n=e.id,a=e.value;"function"===typeof a&&(a=a()),a*=500,t.push({resourceId:n,value:a,cityId:l})})),n.update({progress:0});n.update({progress:a.person?a.progress+1:a.progress})}))}(e,t),function(e,t){Ce(e.City).forEach((function(n){var a=n.people.all().toRefArray().length,r=n.resources.all().toRefArray().find((function(e){return"growth"===e.resourceId}));a<n.housing&&(t.push({resourceId:"growth",cityId:n.id,value:1}),r&&r.amount>=5&&(Ie(e,{cityId:n.id}),t.push({resourceId:"growth",cityId:n.id,value:-5})))}))}(e,t),t.forEach((function(t){return Je(e,t)})),e.state},DRAG:function(e,t){var n=t.source,a=t.destination,r=t.draggableId;if(!a)return e.state;var i=Ce(e.Person).find((function(e){return"".concat(e.id)===r}));if(n.droppableId===a.droppableId){var c=Ce(e.Person).find((function(e){return e._fields.index===a.index}));i&&i.update({index:a.index}),c&&c.update({index:n.index})}else{var o=e.Seat.withId(a.droppableId.split("-")[1]);if(i.seat)e.Seat.withId(i.seat.id).update({person:void 0});o?(i.update({seat:o}),o.update({person:i})):i.update({seat:void 0})}return e.state}},$e=n(88),et=n(145),tt=n.n(et),nt=n(146),at=n.n(nt),rt=n(105),it=Object($e.a)((function(e,t){return Object(rt.b)(e)}),(function(e,t){return Object(rt.a)(e)})),ct={key:"root",storage:tt.a,stateReconciler:at.a,transforms:[it],blacklist:["BuildingType","Resource","Task","Buyable"]},ot=Object($e.b)(ct,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y.getEmptyState(),t=arguments.length>1?arguments[1]:void 0,n=Qe[t.type];return n?n(Y.session(e),t.payload):e})),lt=Object(C.c)({root:ot}),ut=Object(C.e)(lt,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),st=Object($e.c)(ut),dt=ut,ft=(n(1322),n(11)),bt=n(50),mt=n(1342),pt=function(e){var t=e.items,n=Object(r.a)(e,["items"]);return c.a.createElement(d.c,n,(function(e,n){return c.a.createElement("div",{ref:e.innerRef,style:{background:n.isDraggingOver?"lightblue":"lightgrey",padding:8,minWidth:60,display:"flex",minHeight:55}},c.a.createElement(yt,{items:t}),e.placeholder)}))},yt=c.a.memo((function(e){return e.items.map((function(e,t){return c.a.createElement(d.b,{key:e.id+t,draggableId:"".concat(e.id),index:t},(function(n,r){return c.a.createElement("div",Object.assign({ref:n.innerRef},n.draggableProps,n.dragHandleProps,{style:Object(a.a)({userSelect:"none",padding:8,marginRight:8,display:"flex",justifyContent:"center",alignItems:"center",minHeight:40,textAlign:"center",position:"relative",zIndex:r.isDragging?20:1,background:r.isDragging?"lightgreen":"grey"},n.draggableProps.style)}),c.a.createElement(Ot,{item:e,index:t}))}))}))})),Ot=c.a.memo((function(e){return c.a.createElement("span",null,e.item.label)})),ht=function(e){var t=e.seat,n=1-t.progress/t.task.duration;return c.a.createElement(b.a,{display:"flex",flexDirection:"column",flex:1,maxWidth:90},c.a.createElement(b.a,{style:{flex:1,marginRight:8,position:"relative",backgroundColor:"lightgray",borderRadius:4,overflow:"hidden"}},c.a.createElement(b.a,{position:"relative"},c.a.createElement(b.a,{position:"relative",style:{borderBottom:"1px solid #999"}},c.a.createElement(mt.a,{style:{textAlign:"center",position:"relative",zIndex:2}},t.task.id),"number"===typeof n&&c.a.createElement(b.a,{position:"absolute",bgcolor:"green",top:0,left:0,bottom:0,style:{transition:"right ".concat(500,"ms"),transitionTimingFunction:"linear",zIndex:1},right:"".concat(100*n,"%")})),c.a.createElement(b.a,{display:"flex",justifyContent:"center"},c.a.createElement(b.a,{minHeight:56,position:"relative",m:1},c.a.createElement(b.a,{position:"absolute",bgcolor:"gray",top:0,left:0,right:0,bottom:0,style:{pointerEvents:"none",opacity:.3,zIndex:1}}),c.a.createElement(pt,{droppableId:"seat-".concat(t.id),isDropDisabled:!!t.person,items:t.person?[t.person]:[]}))))))},Et=n(106),jt=n.n(Et),gt=n(150),It=function(e){var t=e.id,n=e.label,i=e.action,o=e.disabled,l=Object(r.a)(e,["id","label","action","disabled"]),s=Object(u.c)(),d=Object(u.d)(Be).find((function(e){return e.id===t})),f=vt(Object(a.a)({buyable:d},l));if(!d)return null;var b=JSON.stringify(d.cost).replace(/"/g,"").replace(/\{|\}/g,""),p=function(){var e=Object(gt.a)(jt.a.mark((function e(){return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o||!f){e.next=5;break}return e.next=3,Promise.all(Object.entries(d.cost).map((function(e){var t=Object(bt.a)(e,2),n=t[0],r=t[1];return s(E(Object(a.a)({resourceId:n,value:-r},l)))})));case 3:return e.next=5,s(i);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c.a.createElement(m.a,{onClick:p,style:{display:"block",opacity:!o&&f?1:.5}},n||d.label," (",b,")")},vt=function(e){var t=e.buyable,n=Object(r.a)(e,["buyable"]),a=xt(n);return!!t&&Object.entries(t.cost).every((function(e){var t=Object(bt.a)(e,2),n=t[0],r=t[1],i=Object.entries(a).map((function(e){var t=Object(bt.a)(e,2);return{resourceId:t[0],amount:t[1].amount}})).find((function(e){return e.resourceId===n}));return!!i&&(r<=i.amount?i.amount:0)}))},xt=function(e){var t=e.cityId,n=e.continentId,a=e.planetId,r=e.systemId;return Object(u.d)((function(e){return"number"===typeof t?function(e){return Object(xe.a)(Y,_e,(function(t,n){return Te(n.filter((function(t){return t.city.first().id===e})))}))}(+t)(e):"number"===typeof n?Ue(+n)(e):"number"===typeof a?Me(+a)(e):"number"===typeof r?Ge(+r)(e):Le(e)}))},Ct=n(151),kt=n.n(Ct),Tt=function(e){var t=e.continentId,n=e.cityId,a=e.buildings,r=Object(u.d)(we),i=Object(u.d)(De).filter((function(e){return!a.map((function(e){return e.buildingTypeId})).includes(e.id)}));return c.a.createElement(b.a,null,a.filter((function(e){return r.includes(e.buildingTypeId)})).map((function(e){return c.a.createElement(St,{key:"building-".concat(e.id),building:e,continentId:t,cityId:n})})),i.filter((function(e){return r.includes(e.buildingTypeId)})).map((function(e){return c.a.createElement(It,{key:e.id,id:"createBuilding",label:"buy ".concat(e.label),cityId:+n,action:I({cityId:n,buildingTypeId:e.id})})})))},St=function(e){var t=kt()(e.building.seats.filter((function(e){return!!e.task})),(function(e){return e.task.id}));return c.a.createElement(b.a,{mb:3},c.a.createElement(mt.a,null,e.building.label),Object.entries(t).map((function(t,n){var a=Object(bt.a)(t,2),r=a[0],i=a[1];return c.a.createElement(wt,{key:r,taskId:r,seats:i,index:n,id:e.building.id,continentId:e.continentId,cityId:e.cityId})})))},wt=function(e){return c.a.createElement(b.a,{display:"flex"},e.seats.map((function(t){return c.a.createElement(ht,{key:"task".concat(t.id),index:e.index,seat:t})})),c.a.createElement(It,{continentId:+e.continentId,id:"buySeat",cityId:+e.cityId,action:x({buildingId:e.id,taskId:e.taskId})}))},Rt=function(e){e.continentId,e.cityId;var t=e.people;return c.a.createElement(c.a.Fragment,null,c.a.createElement(pt,{droppableId:"people",items:t.filter((function(e){return!e.seat})).sort((function(e,t){return e.index-t.index}))}))},At=n(107),Pt=n.n(At),Nt=n(153),Bt=function(e){var t=e.resource;return c.a.createElement(b.a,{"data-tip":t.resourceId,display:"flex"},c.a.createElement(b.a,null,c.a.createElement(mt.a,{style:{color:t.color,fontWeight:"bold"}},t.resourceId,":")),c.a.createElement(b.a,{ml:1,display:"flex",flexDirection:"row",alignItems:"center"},c.a.createElement(mt.a,null,Pt()(t.amount).format("0,0.0"),"/",Pt()(t.limit).format("0,0"))))},Dt=function(e){var t=e.hide,n=e.resources,r=Object(u.d)(we);if(t)return null;var i=n;return Array.isArray(n)||(i=Object.entries(n).map((function(e){var t=Object(bt.a)(e,2),n=t[0],r=t[1];return Object(a.a)({resourceId:n},r)}))),c.a.createElement(b.a,{className:"flex flex-column",my:1},i.filter((function(e){return r.includes(e.resourceId)})).map((function(e){return c.a.createElement(b.a,{key:e.resourceId,display:"flex",flexDirection:"row"},c.a.createElement(Bt,{resource:e}))})),c.a.createElement(Nt.a,null))},_t=function(e){var t=e.children,n=e.sidebar;return c.a.createElement(b.a,{display:"flex"},c.a.createElement(b.a,{display:"flex",flexDirection:"column",flex:3,minWidth:150,p:1},n),c.a.createElement(b.a,{flex:7,p:1},t))},Lt=function(e){var t=e.label,n=e.resources,a=e.linkText,r=e.uri,i=e.children;return c.a.createElement(c.a.Fragment,null,r?c.a.createElement("a",{href:r},a):c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("span",null,t),i,c.a.createElement(Dt,{resources:n}))},Gt=function(){var e=Object(ft.f)().id,t=void 0===e?"0":e,n=Object(u.d)(Ne),a=Object(u.d)(we),r=n.find((function(e){return"".concat(e.id)===t}));if(!r)return null;var i=r.continent.id;return c.a.createElement(_t,{sidebar:c.a.createElement(Lt,{uri:a.includes("continent")&&"#/continent/".concat(i),linkText:a.includes("continent")&&"Back to ".concat(r.continent.label),label:"City: ".concat(r.label),resources:r.resources},c.a.createElement("span",null,"biome: ",r.plot.biome),c.a.createElement("span",null,"housing: ",r.people.length,"/",r.housing))},c.a.createElement(Rt,{continentId:i,cityId:r.id,people:r.people}),c.a.createElement(Tt,{continentId:i,cityId:r.id,buildings:r.buildings}))},Mt=function(){var e=Object(ft.f)().id,t=void 0===e?"0":e,n=Object(u.d)(Pe).find((function(e){return"".concat(e.id)===t})),a=Object(u.d)(Ue(+t)),r=Object(u.d)(we);return n?c.a.createElement(_t,{sidebar:c.a.createElement(Lt,{uri:r.includes("planet")&&"#/planet/".concat(n.planet.id),linkText:r.includes("planet")&&"Back to ".concat(n.planet.label),label:"Continent: ".concat(n.label),resources:a})},c.a.createElement("span",null,"Cities:"),c.a.createElement(b.a,{display:"flex",flexDirection:"column"},n.cities.map((function(e){return c.a.createElement(Ut,{key:e.id,city:e})}))),n.plots.filter((function(e){return!e.city&&e.explored})).map((function(e){return c.a.createElement(b.a,{key:"".concat(e.id,"-explore"),display:"flex",alignItems:"center"},c.a.createElement(It,{continentId:+t,id:"buyCity",action:v({plotId:e.id})}),c.a.createElement(mt.a,null,e.biome))})),n.plots.filter((function(e){return!e.city&&!e.explored})).length>0&&c.a.createElement(It,{continentId:+t,id:"exploreContinent",action:j({continentId:n.id})})):null},Ut=function(e){var t=e.city;return c.a.createElement(b.a,{my:1,display:"flex",alignItems:"center"},c.a.createElement("a",{href:"#/city/".concat(t.id),style:{marginRight:8}},t.label),c.a.createElement(Dt,{hide:!0,resources:t.resources}))},Ht=function(){var e=Object(ft.f)().id,t=void 0===e?"0":e,n=Object(u.d)(Ae),a=Object(u.d)(Me(+t)),r=Object(u.d)(we),i=n.find((function(e){return"".concat(e.id)===t}));return i?c.a.createElement(_t,{sidebar:c.a.createElement(Lt,{uri:r.includes("system")&&"#/system/".concat(i.system.id),linkText:r.includes("system")&&"Back to ".concat(i.system.label),label:"Planet: ".concat(i.label),resources:a},c.a.createElement("span",null,i.type.id))},c.a.createElement("span",null,"Continents:"),c.a.createElement(b.a,{display:"flex",flexDirection:"column"},i.continents.filter((function(e){return e.explored})).map((function(e){return c.a.createElement(Vt,{key:e.id,continent:e})}))),i.continents.filter((function(e){return!e.explored})).length>0&&c.a.createElement(It,{planetId:+t,id:"explorePlanet",action:j({planetId:i.id})})):null},Vt=function(e){var t=e.continent,n=Object(u.d)(Ue(t.id));return c.a.createElement(b.a,{my:1,display:"flex",alignItems:"center"},c.a.createElement("a",{href:"#/continent/".concat(t.id),style:{marginRight:8}},t.label),c.a.createElement(Dt,{hide:!0,resources:n}),!t.settled&&c.a.createElement(It,{id:"settleContinent",action:g({continentId:t.id})}))},Wt=function(){var e=Object(ft.f)().id,t=void 0===e?"0":e,n=Object(u.d)(Re).find((function(e){return"".concat(e.id)===t})),a=Object(u.d)(Ge(+t)),r=Object(u.d)(we);return c.a.createElement(_t,{sidebar:c.a.createElement(Lt,{uri:r.includes("galaxy")&&"#/",linkText:r.includes("galaxy")&&"Back to Galaxy",label:"System: ".concat(n.label),resources:a})},c.a.createElement("span",null,"Planets:"),c.a.createElement(b.a,{display:"flex",flexDirection:"column"},n.planets.filter((function(e){return e.explored})).map((function(e){return c.a.createElement(zt,{key:e.id,planet:e})}))),n.planets.filter((function(e){return!e.explored})).length>0&&c.a.createElement(It,{systemId:n.id,id:"exploreContinent",action:j({systemId:n.id})}))},zt=function(e){var t=e.planet,n=Object(u.d)(Me(t.id));return c.a.createElement(b.a,{my:1,display:"flex",alignItems:"center"},c.a.createElement("a",{href:"#/planet/".concat(t.id),style:{marginRight:8}},t.label),c.a.createElement(Dt,{hide:!0,resources:n}),!t.settled&&c.a.createElement(It,{systemId:t.system.id,id:"settlePlanet",action:g({planetId:t.id})}))},Xt=function(){var e=Object(u.d)(Re),t=Object(u.d)(Le);return c.a.createElement(_t,{sidebar:c.a.createElement(Lt,{label:"Galaxy",resources:t})},c.a.createElement("span",null,"Systems:"),c.a.createElement(b.a,{display:"flex",flexDirection:"column"},e.filter((function(e){return e.explored})).map((function(e){return c.a.createElement(Kt,{key:e.id,system:e})}))),e.filter((function(e){return!e.explored})).length>0&&c.a.createElement(It,{id:"exploreGalaxy",action:j()}))},Kt=function(e){var t=e.system,n=Object(u.d)(Ge(t.id));return c.a.createElement(b.a,{my:1,display:"flex",alignItems:"center"},c.a.createElement("a",{href:"#/system/".concat(t.id),style:{marginRight:8}},t.label),c.a.createElement(Dt,{hide:!0,resources:n}),!t.settled&&c.a.createElement(It,{id:"settleSystem",action:g({systemId:t.id})}))},Yt=function(){var e=Object(u.d)(we);return c.a.createElement(ft.c,null,e.includes("system")&&c.a.createElement(ft.a,{exact:!0,path:"/system/:id",render:function(){return c.a.createElement(Wt,null)}}),e.includes("planet")&&c.a.createElement(ft.a,{exact:!0,path:"/planet/:id",render:function(){return c.a.createElement(Ht,null)}}),e.includes("continent")&&c.a.createElement(ft.a,{exact:!0,path:"/continent/:id",render:function(){return c.a.createElement(Mt,null)}}),c.a.createElement(ft.a,{exact:!0,path:"/city/:id",render:function(){return c.a.createElement(Gt,null)}}),c.a.createElement(ft.a,{path:"*",render:function(){return e.includes("galaxy")?c.a.createElement(Xt,null):e.includes("system")?c.a.createElement(Wt,null):e.includes("planet")?c.a.createElement(Ht,null):e.includes("continent")?c.a.createElement(Mt,null):c.a.createElement(Gt,null)}}))},Ft=n(152),qt=function(){var e=Object(u.c)();return Object(i.useEffect)((function(){e(y())}),[e]),Object(i.useEffect)((function(){var t=setInterval((function(){e(O())}),500);return function(){return clearInterval(t)}}),[e]),c.a.createElement(f.a,null,c.a.createElement(d.a,{onDragEnd:function(t){var n=t.source,i=t.destination,c=Object(r.a)(t,["source","destination"]);return e(h(Object(a.a)({source:n,destination:i},c)))}},c.a.createElement(Yt,null),c.a.createElement(b.a,{position:"fixed",bottom:0,right:0},c.a.createElement(m.a,{onClick:function(){st.purge(),localStorage.removeItem("hasSession"),window.location="/#/city/0",window.location.reload()}},"Clear save"))))};l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(u.a,{store:dt},c.a.createElement(s.a,null,c.a.createElement(Ft.a,{loading:null,persistor:st},c.a.createElement(qt,null))))),document.getElementById("root"))},159:function(e,t,n){e.exports=n(1329)}},[[159,1,2]]]);
//# sourceMappingURL=main.7e64c846.chunk.js.map